(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{472:function(e,t,n){Promise.resolve().then(n.bind(n,4420))},357:function(e,t,n){"use strict";var r,a;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c=[],l=!1,u=-1;function f(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&m())}function m(){if(!l){var e=i(f);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||i(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,r),o=!1}finally{o&&delete n[e]}return s.exports}r.ab="//";var a=r(229);e.exports=a}()},4420:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7437),a=n(2265),s=n(3550),o=n(4022),i=n(9234);function c(){let[e,t]=(0,a.useState)([]),[n,c]=(0,a.useState)(null),[l,u]=(0,a.useState)(!0),[f,m]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=!0;return async function(){try{let[n,r]=await Promise.all([i.q.getJourneys({limit:12}),i.q.getAnalytics()]);if(!e)return;t(n.journeys),c(r),m(null)}catch(t){if(!e)return;m(t instanceof Error?t.message:"Unable to load customer journey data")}finally{e&&u(!1)}}(),()=>{e=!1}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"card",children:[(0,r.jsx)("h2",{children:"Customer Journey Analytics"}),(0,r.jsx)("p",{children:"Monitor progression from qualification to closing and isolate bottlenecks quickly."})]}),n?(0,r.jsxs)("section",{className:"grid-4",children:[(0,r.jsx)(o.i,{label:"Total Journeys",value:"".concat(n.totalJourneys)}),(0,r.jsx)(o.i,{label:"Active",value:"".concat(n.activeJourneys)}),(0,r.jsx)(o.i,{label:"Completed",value:"".concat(n.completedJourneys)}),(0,r.jsx)(o.i,{label:"Avg Satisfaction",value:n.avgSatisfactionScore.toFixed(1)})]}):null,(0,r.jsx)(s.a,{loading:l,error:f,empty:0===e.length,emptyLabel:"No customer journeys are currently available."}),e.length>0?(0,r.jsxs)("section",{className:"card",children:[(0,r.jsx)("h3",{children:"Live Journey Queue"}),(0,r.jsx)("div",{className:"list",children:e.map(e=>(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("p",{className:"row-title",children:e.customerName}),(0,r.jsxs)("p",{className:"row-subtitle",children:[e.type," \xb7 ",e.status," \xb7 ",e.completionPercentage,"% complete"]})]},e.id))})]}):null]})}},3550:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var r=n(7437);function a(e){let{loading:t,error:n,empty:a,emptyLabel:s}=e;return t?(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("p",{className:"small",children:"Loading live platform data..."})}):n?(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("p",{className:"status-error",children:"Data retrieval failed"}),(0,r.jsx)("p",{className:"small",children:n})]}):a?(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("p",{className:"status-warn",children:"No data available"}),(0,r.jsx)("p",{className:"small",children:s})]}):null}},4022:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(7437);function a(e){let{label:t,value:n,hint:a}=e;return(0,r.jsxs)("article",{className:"card",children:[(0,r.jsx)("p",{className:"small",children:t}),(0,r.jsx)("div",{className:"metric-value",children:n}),a?(0,r.jsx)("p",{className:"small",children:a}):null]})}},9234:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var r=n(1013);function a(){return{totalJourneys:24,activeJourneys:8,completedJourneys:14,avgCompletionTime:4100,avgSatisfactionScore:4.5,completionRateByType:{FIRST_TIME_BUYER:.74,SELLER:.69},stageAnalysis:{qualification:{avg_minutes:18},matching:{avg_minutes:35}},agentPerformance:{"journey-orchestrator":{successRate:.9},"lead-bot":{successRate:.93}},bottleneckAnalysis:[{stage:"Offer preparation",impact:"medium",recommendation:"Trigger parallel doc collection flow"}]}}function s(e){return(0,r.Uy)(e)&&(0,r.HD)(e.id)&&(0,r.HD)(e.name)&&(0,r.HD)(e.description)&&(0,r.HD)(e.agentId)&&(0,r.HD)(e.agentName)&&(0,r.hj)(e.estimatedDuration)&&(0,r.HD)(e.status)&&Array.isArray(e.nextSteps)}function o(e){return(0,r.Uy)(e)&&(0,r.HD)(e.id)&&(0,r.HD)(e.customerId)&&(0,r.HD)(e.customerName)&&(0,r.HD)(e.type)&&(0,r.HD)(e.status)&&(0,r.HD)(e.priority)&&(0,r.hj)(e.currentStep)&&(0,r.hj)(e.totalSteps)&&(0,r.hj)(e.completionPercentage)&&(0,r.HD)(e.startTime)&&Array.isArray(e.steps)&&e.steps.every(s)&&(0,r.Uy)(e.analytics)&&(0,r.Uy)(e.context)&&Array.isArray(e.notifications)}function i(e){return(0,r.Uy)(e)&&(0,r.hj)(e.totalJourneys)&&(0,r.hj)(e.activeJourneys)&&(0,r.hj)(e.completedJourneys)&&(0,r.hj)(e.avgCompletionTime)&&(0,r.hj)(e.avgSatisfactionScore)&&(0,r.Uy)(e.completionRateByType)&&(0,r.Uy)(e.stageAnalysis)&&(0,r.Uy)(e.agentPerformance)&&Array.isArray(e.bottleneckAnalysis)}function c(e){return(0,r.Uy)(e)&&Array.isArray(e.journeys)&&e.journeys.every(o)}let l={async getJourneys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit?"?limit=".concat(e.limit):"";return(0,r.DV)("/api/customer-journey/journeys".concat(t),{validate:c,transform:e=>({journeys:e.journeys}),fallback:()=>({journeys:[{id:"journey-1",customerId:"cust-101",customerName:"Sarah Chen",customerEmail:"sarah@example.com",type:"FIRST_TIME_BUYER",status:"active",priority:"high",currentStep:2,totalSteps:5,completionPercentage:40,startTime:new Date(Date.now()-72e6).toISOString(),steps:[{id:"step-1",name:"Qualification",description:"Lead qualification and readiness scoring",agentId:"lead-bot",agentName:"Lead Bot",estimatedDuration:1800,status:"completed",nextSteps:["step-2"]},{id:"step-2",name:"Needs Analysis",description:"Buyer profile and property requirements",agentId:"journey-orchestrator",agentName:"Journey Orchestrator",estimatedDuration:2400,status:"active",nextSteps:["step-3"]}],analytics:{velocity:"improving"},context:{channel:"zillow"},notifications:[]}]})})},getAnalytics:async()=>(0,r.DV)("/api/customer-journey/analytics",{validate:i,fallback:a})}},1013:function(e,t,n){"use strict";n.d(t,{DV:function(){return o},HD:function(){return l},Pe:function(){return i},Uy:function(){return c},hj:function(){return u}});var r=n(357);class a{async get(e){let t=await fetch("".concat(this.baseUrl).concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-store"});if(!t.ok)throw Error("GET ".concat(e," failed: ").concat(t.status," ").concat(t.statusText));return t.json()}async post(e,t){let n=await fetch("".concat(this.baseUrl).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:t?JSON.stringify(t):void 0,cache:"no-store"});if(!n.ok)throw Error("POST ".concat(e," failed: ").concat(n.status," ").concat(n.statusText));return n.json()}constructor(e){this.baseUrl=e||r.env.NEXT_PUBLIC_ENTERPRISE_API_BASE_URL||r.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000"}}let s=new a;async function o(e,t){let n=Array.isArray(e)?e:[e],r=[];for(let e of n)try{let n=await s.get(e);if(!t.validate(n))throw Error("Invalid response shape for ".concat(e));return t.transform?t.transform(n):n}catch(e){r.push(e instanceof Error?e.message:String(e))}if(t.fallback)return t.fallback();throw Error(r.join(" | "))}async function i(e,t,n){try{let r=await s.post(e,t);if(!n.validate(r))throw Error("Invalid response shape for ".concat(e));return n.transform?n.transform(r):r}catch(e){if(n.fallback)return n.fallback();throw e}}function c(e){return"object"==typeof e&&null!==e}function l(e){return"string"==typeof e}function u(e){return"number"==typeof e&&Number.isFinite(e)}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=472)}),_N_E=e.O()}]);