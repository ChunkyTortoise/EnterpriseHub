[pytest]
# ==============================================================================
# Pytest Configuration for Visual Regression Testing
# ==============================================================================

# Minimum Python version
minversion = 7.0

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = .

# Markers for categorizing tests
markers =
    visual: Visual regression tests using Playwright screenshots
    accessibility: WCAG 2.1 AA accessibility tests
    critical: Tests for critical components (property_card, lead_intelligence_hub, etc.)
    responsive: Tests for responsive design across viewports
    slow: Tests that take longer to run (complex components, multiple viewports)
    smoke: Quick smoke tests for basic functionality

# Playwright configuration
asyncio_mode = auto

# Output options
console_output_style = progress
verbosity = 1

# Screenshot options (Playwright)
# These can be overridden with command-line flags
# --screenshot=on|off|only-on-failure
# --video=on|off|retain-on-failure
# --tracing=on|off|retain-on-failure

# Timeout configuration
timeout = 300  # 5 minutes for entire test suite
timeout_method = thread

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Coverage (if running with --cov)
# pytest --cov=ghl_real_estate_ai/streamlit_demo/components tests/visual/
addopts =
    --strict-markers
    --tb=short
    --maxfail=10

# Parallel execution (requires pytest-xdist)
# Uncomment to enable parallel test execution:
# addopts = -n auto --dist loadscope
