# =============================================================================
# Service 6 Lead Recovery & Nurture Engine - Production Environment Template
# =============================================================================
#
# Copy this file to .env and fill in your actual values.
# DO NOT commit the actual .env file to version control.
#
# Required for production deployment:
# - Database credentials
# - Redis configuration  
# - Security keys
# - External service API keys
# - Webhook configuration

# =============================================================================
# Application Configuration
# =============================================================================

# Environment: production, staging, development
ENVIRONMENT=production

# Debug mode (set to false for production)
DEBUG=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Application version
APP_VERSION=1.0.0

# =============================================================================
# Database Configuration (REQUIRED)
# =============================================================================

# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://service6_user:YOUR_SECURE_DB_PASSWORD@localhost:5432/service6_leads

# Database password (used in Docker Compose)
DB_PASSWORD=YOUR_SECURE_DB_PASSWORD_CHANGE_ME

# Database connection pool settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_MAX_QUERIES=50000
DB_POOL_MAX_INACTIVE_CONNECTION_LIFETIME=300

# =============================================================================
# Redis Cache Configuration (REQUIRED)
# =============================================================================

# Redis connection URL  
# Format: redis://[password@]host:port/database
REDIS_URL=redis://localhost:6379/0

# Redis password (if authentication enabled)
REDIS_PASSWORD=

# Redis connection pool settings
REDIS_POOL_MAX_CONNECTIONS=20
REDIS_DEFAULT_TTL=3600

# =============================================================================
# Security Configuration (REQUIRED)
# =============================================================================

# JWT secret key - MUST be a secure random string of at least 32 characters
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=YOUR_SECURE_JWT_SECRET_KEY_MINIMUM_32_CHARACTERS_REQUIRED

# JWT token expiration (hours)
JWT_EXPIRY_HOURS=24

# API rate limiting (requests per minute)
API_RATE_LIMIT=100
BURST_RATE_LIMIT=200

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://app.gohighlevel.com,https://*.gohighlevel.com,http://localhost:3000

# =============================================================================
# Claude AI Configuration (REQUIRED for AI features)
# =============================================================================

# Claude API key from Anthropic
CLAUDE_API_KEY=your_claude_api_key_here

# Claude model to use
CLAUDE_MODEL=claude-3-sonnet-20240229

# Claude request timeout (seconds)
CLAUDE_TIMEOUT=30

# Claude max tokens per request
CLAUDE_MAX_TOKENS=4000

# =============================================================================
# Apollo.io Integration (OPTIONAL but recommended)
# =============================================================================

# Apollo.io API key for lead enrichment
APOLLO_API_KEY=your_apollo_api_key_here

# Apollo rate limiting (requests per minute)
APOLLO_RATE_LIMIT=200

# Apollo timeout (seconds)
APOLLO_TIMEOUT=30

# Apollo webhook secret for signature verification
APOLLO_WEBHOOK_SECRET=your_apollo_webhook_secret_here

# =============================================================================
# Twilio SMS Integration (OPTIONAL)
# =============================================================================

# Twilio account credentials
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here

# Twilio phone number for sending SMS (must include country code)
TWILIO_PHONE_NUMBER=+1234567890

# SMS rate limiting (messages per minute)
TWILIO_RATE_LIMIT=100

# Twilio webhook secret (same as auth token for signature verification)
TWILIO_WEBHOOK_SECRET=your_twilio_auth_token_here

# =============================================================================
# SendGrid Email Integration (OPTIONAL)
# =============================================================================

# SendGrid API key
SENDGRID_API_KEY=your_sendgrid_api_key_here

# Sender information
SENDGRID_SENDER_EMAIL=noreply@yourcompany.com
SENDGRID_SENDER_NAME=Service 6 Lead Engine

# Email rate limiting (emails per minute)
SENDGRID_RATE_LIMIT=1000

# SendGrid webhook secret for signature verification
SENDGRID_WEBHOOK_SECRET=your_sendgrid_webhook_verification_key_here

# SendGrid template IDs (if using dynamic templates)
SENDGRID_TEMPLATE_WELCOME=d-your_welcome_template_id
SENDGRID_TEMPLATE_FOLLOW_UP=d-your_follow_up_template_id
SENDGRID_TEMPLATE_MARKET_REPORT=d-your_market_report_template_id

# =============================================================================
# GoHighLevel CRM Integration (REQUIRED for CRM features)
# =============================================================================

# GHL API key and location
GHL_API_KEY=your_ghl_api_key_here
GHL_LOCATION_ID=your_ghl_location_id_here

# GHL webhook secret for signature verification
GHL_WEBHOOK_SECRET=your_ghl_webhook_secret_here

# GHL API timeout (seconds)
GHL_TIMEOUT=30

# =============================================================================
# Webhook Configuration (REQUIRED)
# =============================================================================

# Base URL for your application (for webhook callbacks)
# Must be accessible from external services
WEBHOOK_BASE_URL=https://your-domain.com

# Webhook timeout (seconds)
WEBHOOK_TIMEOUT_SECONDS=30

# Webhook retry configuration
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=1.0

# =============================================================================
# Monitoring and Alerting (OPTIONAL but recommended)
# =============================================================================

# Enable monitoring services
ENABLE_MONITORING=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# Slack webhook URL for alerts
SLACK_WEBHOOK_URL=your_slack_webhook_url_for_alerts

# Alert thresholds
ALERT_RESPONSE_TIME_THRESHOLD_MS=5000
ALERT_ERROR_RATE_THRESHOLD=0.01
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85

# Metrics retention (hours)
METRICS_RETENTION_HOURS=168

# =============================================================================
# Performance Configuration
# =============================================================================

# Application server configuration
MAX_WORKERS=4
WORKER_TIMEOUT=30
WORKER_KEEPALIVE=2
WORKER_CONNECTIONS=1000

# Async operation timeouts
ASYNC_TIMEOUT=30
HTTP_CLIENT_TIMEOUT=30

# Batch processing limits
BATCH_SIZE_LEADS=100
BATCH_SIZE_EMAILS=50
BATCH_SIZE_SMS=10

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/disable specific features
ENABLE_APOLLO_ENRICHMENT=true
ENABLE_SMS_AUTOMATION=true
ENABLE_EMAIL_AUTOMATION=true
ENABLE_GHL_SYNC=true
ENABLE_REAL_TIME_PROCESSING=true

# Lead processing configuration
AUTO_LEAD_SCORING=true
AUTO_LEAD_ROUTING=true
AUTO_NURTURE_ENROLLMENT=true

# Compliance features
ENABLE_GDPR_COMPLIANCE=true
ENABLE_CANSPAM_COMPLIANCE=true
ENABLE_TCPA_COMPLIANCE=true

# =============================================================================
# Development and Testing (for non-production environments)
# =============================================================================

# Test mode (disables external API calls)
TEST_MODE=false

# Mock services (for development)
MOCK_APOLLO=false
MOCK_TWILIO=false
MOCK_SENDGRID=false
MOCK_GHL=false

# Development database (if different from production)
DEV_DATABASE_URL=postgresql://service6_user:dev_password@localhost:5433/service6_leads_dev

# Development Redis (if different from production)
DEV_REDIS_URL=redis://localhost:6380/0

# Enable debug endpoints
ENABLE_DEBUG_ENDPOINTS=false

# =============================================================================
# Backup and Maintenance
# =============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Maintenance windows
MAINTENANCE_ENABLED=false
MAINTENANCE_START_HOUR=2
MAINTENANCE_END_HOUR=4
MAINTENANCE_TIMEZONE=UTC

# =============================================================================
# Advanced Configuration
# =============================================================================

# Circuit breaker configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# Retry policies
MAX_RETRIES=3
BASE_RETRY_DELAY=1.0
MAX_RETRY_DELAY=60.0

# Cache configuration
CACHE_DEFAULT_TTL=3600
CACHE_LEADS_TTL=1800
CACHE_HEALTH_CHECKS_TTL=300

# Request/Response logging
LOG_REQUESTS=false
LOG_RESPONSES=false
LOG_REQUEST_BODIES=false

# Data retention policies
LEAD_DATA_RETENTION_DAYS=2555  # 7 years
COMMUNICATION_LOG_RETENTION_DAYS=1095  # 3 years
METRICS_RETENTION_DAYS=90

# =============================================================================
# SSL/TLS Configuration (for production deployments)
# =============================================================================

# SSL certificate paths (if using file-based certificates)
SSL_CERT_PATH=/etc/ssl/certs/service6.crt
SSL_KEY_PATH=/etc/ssl/private/service6.key

# Let's Encrypt configuration (if using automated certificates)
LETSENCRYPT_EMAIL=admin@yourcompany.com
LETSENCRYPT_STAGING=false

# =============================================================================
# Docker Configuration
# =============================================================================

# Docker image tags
SERVICE6_IMAGE_TAG=latest
POSTGRES_IMAGE_TAG=15-alpine
REDIS_IMAGE_TAG=7-alpine

# Container resource limits
APP_MEMORY_LIMIT=1g
APP_CPU_LIMIT=1.0
DB_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m

# =============================================================================
# Additional Environment Variables
# =============================================================================

# Custom configuration for specific deployments
CUSTOM_CONFIG_1=
CUSTOM_CONFIG_2=

# Third-party service configurations
ANALYTICS_TRACKING_ID=
ERROR_TRACKING_DSN=

# Regional settings
TIMEZONE=UTC
LOCALE=en_US
CURRENCY=USD

# =============================================================================
# Security Notes
# =============================================================================

# IMPORTANT SECURITY REQUIREMENTS:
#
# 1. Change all default passwords and secrets
# 2. Use strong, unique passwords (minimum 16 characters)
# 3. Enable database SSL/TLS in production
# 4. Use encrypted connections for Redis
# 5. Implement proper firewall rules
# 6. Regular security updates and patches
# 7. Monitor for suspicious activity
# 8. Backup encryption keys securely
#
# Never commit actual credentials to version control!

# =============================================================================
# End of Configuration
# =============================================================================