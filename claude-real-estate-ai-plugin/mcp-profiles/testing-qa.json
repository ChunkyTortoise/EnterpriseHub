{
  "name": "testing-qa",
  "description": "MCP server configuration for testing, QA, and quality assurance workflows",
  "mcpServers": {
    "serena": {
      "enabled": true,
      "config": {
        "command": "uvx",
        "args": ["serena-mcp"]
      },
      "tools": [
        "read_file",
        "find_symbol",
        "search_for_pattern",
        "execute_shell_command"
      ],
      "use_cases": [
        "Find untested code",
        "Analyze test coverage",
        "Search for test patterns",
        "Execute test suites",
        "Generate coverage reports"
      ]
    },
    "playwright": {
      "enabled": true,
      "config": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-playwright"]
      },
      "tools": [
        "browser_navigate",
        "browser_snapshot",
        "browser_click",
        "browser_fill_form",
        "browser_evaluate",
        "browser_take_screenshot",
        "browser_wait_for"
      ],
      "use_cases": [
        "E2E testing of Streamlit app",
        "UI regression testing",
        "Screenshot comparison",
        "User flow validation",
        "Performance testing"
      ]
    },
    "greptile": {
      "enabled": true,
      "config": {
        "command": "npx",
        "args": ["-y", "@greptile/mcp-server"]
      },
      "tools": [
        "list_merge_requests",
        "get_merge_request",
        "list_merge_request_comments",
        "list_code_reviews"
      ],
      "use_cases": [
        "Review test coverage in PRs",
        "Track testing patterns",
        "Quality metrics",
        "Code review analysis"
      ]
    }
  },
  "permissions": {
    "allowedPaths": [
      "tests/**/*.py",
      "ghl_real_estate_ai/**/*.py",
      ".pytest_cache/**",
      "coverage/**",
      ".coverage"
    ],
    "deniedPaths": [
      ".env",
      ".env.local",
      "secrets/**",
      "data/analytics/**"
    ],
    "allowedTools": [
      "Read",
      "Write(tests/**)",
      "Edit",
      "Grep",
      "Glob",
      "Bash(python3 -m pytest:*)",
      "Bash(pytest:*)",
      "Bash(coverage run:*)",
      "Bash(coverage report:*)",
      "Bash(coverage html:*)",
      "Bash(python3 -m py_compile:*)",
      "mcp__plugin_playwright_playwright__*",
      "mcp__plugin_serena_serena__read_file",
      "mcp__plugin_serena_serena__search_for_pattern",
      "mcp__plugin_greptile_greptile__*"
    ]
  },
  "context": {
    "focus_areas": [
      "TDD workflow (RED-GREEN-REFACTOR)",
      "Test coverage analysis",
      "Unit testing services",
      "Integration testing APIs",
      "E2E testing Streamlit UI",
      "Mock external dependencies",
      "Race condition detection",
      "Flaky test prevention"
    ],
    "testing_structure": {
      "unit_tests": "tests/unit/**/*.py",
      "integration_tests": "tests/integration/**/*.py",
      "e2e_tests": "tests/e2e/**/*.py",
      "fixtures": "tests/fixtures/**/*.py",
      "mocks": "tests/mocks/**/*.py"
    },
    "coverage_targets": {
      "overall": "80%",
      "services": "90%",
      "api_routes": "85%",
      "components": "70%"
    },
    "patterns": [
      "Use pytest fixtures for setup/teardown",
      "Mock external APIs with pytest-mock",
      "Test async code with pytest-asyncio",
      "Use fakeredis for Redis testing",
      "Freeze time with freezegun for time-dependent tests",
      "Use hypothesis for property-based testing",
      "Test error cases explicitly",
      "Avoid sleep() - use condition-based-waiting"
    ]
  },
  "test_execution_workflows": {
    "unit_tests": {
      "command": "pytest tests/unit -v --cov=ghl_real_estate_ai",
      "fast": true,
      "when": "During development, before commit"
    },
    "integration_tests": {
      "command": "pytest tests/integration -v --cov=ghl_real_estate_ai",
      "fast": false,
      "when": "Before PR, in CI/CD"
    },
    "e2e_tests": {
      "command": "pytest tests/e2e -v --headed",
      "fast": false,
      "when": "Before release, in staging environment"
    },
    "all_tests": {
      "command": "pytest tests/ -v --cov=ghl_real_estate_ai --cov-report=html",
      "fast": false,
      "when": "Full validation, CI/CD pipeline"
    },
    "quick_sanity": {
      "command": "pytest tests/ -m smoke -v",
      "fast": true,
      "when": "Quick validation after changes"
    }
  },
  "skills_to_use": [
    "test-driven-development",
    "testing-anti-patterns",
    "condition-based-waiting",
    "defense-in-depth",
    "systematic-debugging"
  ],
  "quality_gates": {
    "pre_commit": [
      "All modified files have corresponding tests",
      "Unit tests pass",
      "Code coverage doesn't decrease",
      "No new flaky tests introduced"
    ],
    "pre_merge": [
      "All tests pass (unit + integration)",
      "Coverage >= 80%",
      "No high-priority security issues",
      "Code review approved"
    ],
    "pre_release": [
      "All tests pass (unit + integration + e2e)",
      "Performance benchmarks met",
      "Security scan passed",
      "Documentation updated"
    ]
  },
  "anti_patterns_to_detect": [
    "Tests without assertions",
    "Sleep() instead of condition waiting",
    "Shared mutable state between tests",
    "Tests depending on execution order",
    "Hardcoded timeouts",
    "Missing cleanup in fixtures",
    "Testing implementation details",
    "Overly complex test setup",
    "Missing error case tests",
    "Tests that pass when they should fail"
  ],
  "notes": "Use this profile when writing tests, analyzing coverage, or validating quality. Combines unit, integration, and E2E testing capabilities."
}
