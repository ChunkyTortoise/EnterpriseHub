# =============================================================================
# Service 6 Lead Recovery & Nurture Engine - Production Environment Template
# =============================================================================
#
# SECURITY UPDATE: All default passwords and API keys have been removed from docker-compose.yml
# Copy this file to .env.service6 and fill in your actual values.
#
# ⚠️  CRITICAL: Production deployment will FAIL without these required variables
# ⚠️  DO NOT commit the actual .env.service6 file to version control
#
# Required for production deployment:
# - Database credentials (REQUIRED - no defaults)
# - Redis authentication (REQUIRED - no defaults)
# - Security keys (REQUIRED - no defaults)
# - External service API keys (REQUIRED - no defaults)
# - Webhook secrets (REQUIRED - no defaults)

# =============================================================================
# Application Configuration
# =============================================================================

# Environment: production, staging, development
ENVIRONMENT=production

# Debug mode (set to false for production)
DEBUG=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Application version
APP_VERSION=1.0.0

# =============================================================================
# Database Configuration (REQUIRED)
# =============================================================================

# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://service6_user:YOUR_SECURE_DB_PASSWORD@localhost:5432/service6_leads

# Database password (REQUIRED - no default in docker-compose)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
DB_PASSWORD=

# Database connection pool settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_MAX_QUERIES=50000
DB_POOL_MAX_INACTIVE_CONNECTION_LIFETIME=300

# =============================================================================
# Redis Cache Configuration (REQUIRED)
# =============================================================================

# Redis connection URL  
# Format: redis://[password@]host:port/database
REDIS_URL=redis://localhost:6379/0

# Redis password (REQUIRED - authentication now mandatory)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
REDIS_PASSWORD=

# Redis connection pool settings
REDIS_POOL_MAX_CONNECTIONS=20
REDIS_DEFAULT_TTL=3600

# =============================================================================
# Security Configuration (REQUIRED)
# =============================================================================

# JWT secret key (REQUIRED - minimum 32 characters)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=

# JWT token expiration (hours)
JWT_EXPIRY_HOURS=24

# API rate limiting (requests per minute)
API_RATE_LIMIT=100
BURST_RATE_LIMIT=200

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://app.gohighlevel.com,https://*.gohighlevel.com,http://localhost:3000

# =============================================================================
# Claude AI Configuration (REQUIRED for AI features)
# =============================================================================

# Claude API key from Anthropic (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
# Get from: https://console.anthropic.com/
CLAUDE_API_KEY=

# Claude model to use
CLAUDE_MODEL=claude-3-sonnet-20240229

# Claude request timeout (seconds)
CLAUDE_TIMEOUT=30

# Claude max tokens per request
CLAUDE_MAX_TOKENS=4000

# =============================================================================
# Apollo.io Integration (REQUIRED)
# =============================================================================

# Apollo.io API key for lead enrichment (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
# Get from: https://app.apollo.io/settings/integrations
APOLLO_API_KEY=

# Apollo rate limiting (requests per minute)
APOLLO_RATE_LIMIT=200

# Apollo timeout (seconds)
APOLLO_TIMEOUT=30

# Apollo webhook secret for signature verification (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
APOLLO_WEBHOOK_SECRET=

# =============================================================================
# Twilio SMS Integration (REQUIRED)
# =============================================================================

# Twilio account credentials (REQUIRED)
# ⚠️  SECURITY: These are now REQUIRED. Production will fail without them.
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# Twilio phone number for sending SMS (REQUIRED - must include country code)
TWILIO_PHONE_NUMBER=

# SMS rate limiting (messages per minute)
TWILIO_RATE_LIMIT=100

# Twilio webhook secret for signature verification (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
# Usually same as TWILIO_AUTH_TOKEN
TWILIO_WEBHOOK_SECRET=

# =============================================================================
# SendGrid Email Integration (REQUIRED)
# =============================================================================

# SendGrid API key (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=

# Sender information (REQUIRED)
SENDGRID_SENDER_EMAIL=
SENDGRID_SENDER_NAME=Service 6 Lead Engine

# Email rate limiting (emails per minute)
SENDGRID_RATE_LIMIT=1000

# SendGrid webhook secret for signature verification (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
SENDGRID_WEBHOOK_SECRET=

# SendGrid template IDs (if using dynamic templates)
SENDGRID_TEMPLATE_WELCOME=d-your_welcome_template_id
SENDGRID_TEMPLATE_FOLLOW_UP=d-your_follow_up_template_id
SENDGRID_TEMPLATE_MARKET_REPORT=d-your_market_report_template_id

# =============================================================================
# GoHighLevel CRM Integration (REQUIRED for CRM features)
# =============================================================================

# GHL API key and location (REQUIRED)
# ⚠️  SECURITY: These are now REQUIRED. Production will fail without them.
# Get from: https://marketplace.gohighlevel.com/
GHL_API_KEY=
GHL_LOCATION_ID=

# GHL webhook secret for signature verification (REQUIRED)
# ⚠️  SECURITY: This is now REQUIRED. Production will fail without it.
GHL_WEBHOOK_SECRET=

# GHL API timeout (seconds)
GHL_TIMEOUT=30

# =============================================================================
# Webhook Configuration (REQUIRED)
# =============================================================================

# Base URL for your application (for webhook callbacks)
# Must be accessible from external services
WEBHOOK_BASE_URL=https://your-domain.com

# Webhook timeout (seconds)
WEBHOOK_TIMEOUT_SECONDS=30

# Webhook retry configuration
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=1.0

# =============================================================================
# Monitoring and Alerting (REQUIRED for production)
# =============================================================================

# Enable monitoring services
ENABLE_MONITORING=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# Grafana admin password (REQUIRED if using monitoring profile)
# ⚠️  SECURITY: This is now REQUIRED when using monitoring. Production will fail without it.
GRAFANA_PASSWORD=

# Slack webhook URL for alerts (OPTIONAL)
SLACK_WEBHOOK_URL=

# Alert thresholds
ALERT_RESPONSE_TIME_THRESHOLD_MS=5000
ALERT_ERROR_RATE_THRESHOLD=0.01
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85

# Metrics retention (hours)
METRICS_RETENTION_HOURS=168

# =============================================================================
# Performance Configuration
# =============================================================================

# Application server configuration
MAX_WORKERS=4
WORKER_TIMEOUT=30
WORKER_KEEPALIVE=2
WORKER_CONNECTIONS=1000

# Async operation timeouts
ASYNC_TIMEOUT=30
HTTP_CLIENT_TIMEOUT=30

# Batch processing limits
BATCH_SIZE_LEADS=100
BATCH_SIZE_EMAILS=50
BATCH_SIZE_SMS=10

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/disable specific features
ENABLE_APOLLO_ENRICHMENT=true
ENABLE_SMS_AUTOMATION=true
ENABLE_EMAIL_AUTOMATION=true
ENABLE_GHL_SYNC=true
ENABLE_REAL_TIME_PROCESSING=true

# Lead processing configuration
AUTO_LEAD_SCORING=true
AUTO_LEAD_ROUTING=true
AUTO_NURTURE_ENROLLMENT=true

# Compliance features
ENABLE_GDPR_COMPLIANCE=true
ENABLE_CANSPAM_COMPLIANCE=true
ENABLE_TCPA_COMPLIANCE=true

# =============================================================================
# Development and Testing (for non-production environments)
# =============================================================================

# Test mode (disables external API calls)
TEST_MODE=false

# Mock services (for development)
MOCK_APOLLO=false
MOCK_TWILIO=false
MOCK_SENDGRID=false
MOCK_GHL=false

# Development database (if different from production)
DEV_DATABASE_URL=postgresql://service6_user:dev_password@localhost:5433/service6_leads_dev

# Development Redis (if different from production)
DEV_REDIS_URL=redis://localhost:6380/0

# Enable debug endpoints
ENABLE_DEBUG_ENDPOINTS=false

# =============================================================================
# Backup and Maintenance
# =============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Maintenance windows
MAINTENANCE_ENABLED=false
MAINTENANCE_START_HOUR=2
MAINTENANCE_END_HOUR=4
MAINTENANCE_TIMEZONE=UTC

# =============================================================================
# Advanced Configuration
# =============================================================================

# Circuit breaker configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# Retry policies
MAX_RETRIES=3
BASE_RETRY_DELAY=1.0
MAX_RETRY_DELAY=60.0

# Cache configuration
CACHE_DEFAULT_TTL=3600
CACHE_LEADS_TTL=1800
CACHE_HEALTH_CHECKS_TTL=300

# Request/Response logging
LOG_REQUESTS=false
LOG_RESPONSES=false
LOG_REQUEST_BODIES=false

# Data retention policies
LEAD_DATA_RETENTION_DAYS=2555  # 7 years
COMMUNICATION_LOG_RETENTION_DAYS=1095  # 3 years
METRICS_RETENTION_DAYS=90

# =============================================================================
# SSL/TLS Configuration (for production deployments)
# =============================================================================

# SSL certificate paths (if using file-based certificates)
SSL_CERT_PATH=/etc/ssl/certs/service6.crt
SSL_KEY_PATH=/etc/ssl/private/service6.key

# Let's Encrypt configuration (if using automated certificates)
LETSENCRYPT_EMAIL=admin@yourcompany.com
LETSENCRYPT_STAGING=false

# =============================================================================
# Docker Configuration
# =============================================================================

# Docker image tags
SERVICE6_IMAGE_TAG=latest
POSTGRES_IMAGE_TAG=15-alpine
REDIS_IMAGE_TAG=7-alpine

# Container resource limits
APP_MEMORY_LIMIT=1g
APP_CPU_LIMIT=1.0
DB_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m

# =============================================================================
# Additional Environment Variables
# =============================================================================

# Custom configuration for specific deployments
CUSTOM_CONFIG_1=
CUSTOM_CONFIG_2=

# Third-party service configurations
ANALYTICS_TRACKING_ID=
ERROR_TRACKING_DSN=

# Regional settings
TIMEZONE=UTC
LOCALE=en_US
CURRENCY=USD

# =============================================================================
# Security Notes
# =============================================================================

# IMPORTANT SECURITY REQUIREMENTS:
#
# 1. Change all default passwords and secrets
# 2. Use strong, unique passwords (minimum 16 characters)
# 3. Enable database SSL/TLS in production
# 4. Use encrypted connections for Redis
# 5. Implement proper firewall rules
# 6. Regular security updates and patches
# 7. Monitor for suspicious activity
# 8. Backup encryption keys securely
#
# Never commit actual credentials to version control!

# =============================================================================
# End of Configuration
# =============================================================================
# =============================================================================
# Monitoring and Observability (PRODUCTION CRITICAL)
# =============================================================================

# Prometheus metrics collection
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Sentry error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Application Performance Monitoring
APM_ENABLED=true
APM_SERVICE_NAME=service6-lead-recovery
APM_ENVIRONMENT=production

# Health check configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3

# Logging configuration
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/service6/app.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

