# ==============================================================================
# JORGE'S GHL AI PRODUCTION CONFIGURATION TEMPLATE
# $4K Client Deployment - Security-Hardened
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env.jorge.production
# 2. Fill in ALL required values
# 3. Validate configuration with: python scripts/validate-jorge-config.py
# 4. Deploy with: ./deploy-jorge-production.sh
#
# SECURITY NOTICE:
# - Keep this file secure and never commit actual values to git
# - Use strong secrets (minimum 32 characters for JWT/webhook secrets)
# - Rotate secrets quarterly
# - Monitor for unauthorized access
#

# ==============================================================================
# ENVIRONMENT
# ==============================================================================
ENVIRONMENT=production
VERSION=1.0.0
DEBUG=false

# ==============================================================================
# JORGE'S GHL CREDENTIALS (Required)
# ==============================================================================
# Jorge's main GHL location ID
GHL_LOCATION_ID=[REPLACE_WITH_JORGE_LOCATION_ID]

# Jorge's GHL API key (JWT format - starts with "eyJ")
GHL_API_KEY=[REPLACE_WITH_JORGE_GHL_API_KEY]

# Jorge's agency master key for sub-accounts (optional - if Jorge has sub-accounts)
# GHL_AGENCY_API_KEY=

# ==============================================================================
# AI CONFIGURATION (Required)
# ==============================================================================
# Jorge's Anthropic API key for Claude
ANTHROPIC_API_KEY=sk-ant-api03-[REPLACE_WITH_JORGE_KEY]

# ==============================================================================
# WEBHOOK SECURITY (Required - Generate Strong Secrets)
# ==============================================================================
# Webhook secret for GHL signature verification (minimum 32 characters)
# Generate with: openssl rand -hex 32
GHL_WEBHOOK_SECRET=[GENERATE_32_CHAR_SECRET]

# JWT secret for API authentication (minimum 32 characters)
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=[GENERATE_32_CHAR_SECRET]

# ==============================================================================
# JORGE'S AI BEHAVIOR SETTINGS
# ==============================================================================
# Tags that activate the AI (Jorge's requirement)
ACTIVATION_TAGS=["Needs Qualifying"]

# Tags that deactivate the AI
DEACTIVATION_TAGS=["AI-Off","Qualified","Stop-Bot","AI-Qualified"]

# Auto-deactivation threshold (Jorge wants 70% = 5 out of 7 questions)
AUTO_DEACTIVATE_THRESHOLD=70

# Lead scoring thresholds (question count)
HOT_LEAD_THRESHOLD=3    # Hot = 3+ questions answered
WARM_LEAD_THRESHOLD=2   # Warm = 2 questions answered

# ==============================================================================
# RAILWAY DATABASE URLS (Auto-provided by Railway)
# ==============================================================================
# These are automatically set by Railway when you add PostgreSQL and Redis plugins
# DATABASE_URL=postgresql://postgres:password@host:port/database
# REDIS_URL=redis://default:password@host:port

# ==============================================================================
# OPTIONAL: JORGE'S EXTENDED FEATURES
# ==============================================================================
# Calendar integration for appointment booking
# GHL_CALENDAR_ID=

# Workflow to trigger when lead becomes hot
# NOTIFY_AGENT_WORKFLOW_ID=

# Custom field IDs in Jorge's GHL for data storage
# CUSTOM_FIELD_LEAD_SCORE=
# CUSTOM_FIELD_BUDGET=
# CUSTOM_FIELD_LOCATION=
# CUSTOM_FIELD_TIMELINE=

# ==============================================================================
# MONITORING & ALERTING
# ==============================================================================
# Sentry DSN for error tracking (free tier available)
# SENTRY_DSN=

# Slack webhook for critical alerts (legacy — see Jorge Alerting below)
# SLACK_WEBHOOK_URL=

# ==============================================================================
# JORGE A/B TESTING (Optional — experiments persisted in PostgreSQL)
# ==============================================================================
AB_TESTING_ENABLED=true
AB_TESTING_MIN_SAMPLE_SIZE=100
AB_TESTING_SIGNIFICANCE_LEVEL=0.05

# ==============================================================================
# JORGE PERFORMANCE TRACKING
# ==============================================================================
PERFORMANCE_TRACKING_ENABLED=true
PERFORMANCE_TRACKING_RETENTION_DAYS=30
PERFORMANCE_TRACKING_ROLLING_WINDOW_HOURS=24
PERFORMANCE_TRACKING_SAMPLE_RATE=1.0

# ==============================================================================
# JORGE ALERTING (Email, Slack, Webhook, PagerDuty, Opsgenie)
# ==============================================================================
ALERTING_ENABLED=true
ALERT_ENVIRONMENT=production

# Email (SMTP)
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_SMTP_HOST=[REPLACE_WITH_SMTP_HOST]
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_SMTP_USER=[REPLACE_WITH_SMTP_USER]
ALERT_EMAIL_SMTP_PASSWORD=[REPLACE_WITH_SMTP_PASSWORD]
ALERT_EMAIL_FROM=alerts@enterprisehub.com
ALERT_EMAIL_TO=[REPLACE_WITH_OPS_EMAIL]

# Slack
ALERT_SLACK_ENABLED=true
ALERT_SLACK_WEBHOOK_URL=[REPLACE_WITH_SLACK_WEBHOOK_URL]
ALERT_SLACK_CHANNEL=#jorge-alerts-prod

# Webhook / PagerDuty / Opsgenie (enable as needed)
ALERT_WEBHOOK_ENABLED=false
# ALERT_WEBHOOK_PAGERDUTY_URL=https://events.pagerduty.com/v2/enqueue
# ALERT_WEBHOOK_PAGERDUTY_API_KEY=[REPLACE_WITH_PD_KEY]
# ALERT_WEBHOOK_OPSGENIE_URL=https://api.opsgenie.com/v2/alerts
# ALERT_WEBHOOK_OPSGENIE_API_KEY=[REPLACE_WITH_OG_KEY]

# ==============================================================================
# JORGE BOT METRICS COLLECTOR
# ==============================================================================
BOT_METRICS_ENABLED=true
BOT_METRICS_COLLECTION_INTERVAL=60
BOT_METRICS_RETENTION_DAYS=7

# ==============================================================================
# PERFORMANCE TUNING
# ==============================================================================
# Redis connection settings
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true

# LLM settings
MAX_TOKENS_PER_RESPONSE=150
CONVERSATION_CONTEXT_WINDOW_HOURS=24

# Rate limiting
DEFAULT_RATE_LIMIT=100
BURST_RATE_LIMIT=200

# ==============================================================================
# SECURITY HEADERS
# ==============================================================================
CORS_ORIGINS=["https://app.gohighlevel.com","https://*.gohighlevel.com"]
SECURITY_HEADERS_ENABLED=true

# ==============================================================================
# BACKUP & RETENTION
# ==============================================================================
# Data retention (days)
CONVERSATION_RETENTION_DAYS=30
ANALYTICS_RETENTION_DAYS=90

# ==============================================================================
# CONFIGURATION VALIDATION
# ==============================================================================
# The following values will be validated on startup:
#
# REQUIRED (will fail if missing):
# - GHL_LOCATION_ID (must match Jorge's location)
# - GHL_API_KEY (must be valid JWT format)
# - ANTHROPIC_API_KEY (must start with sk-ant-)
# - GHL_WEBHOOK_SECRET (must be 32+ characters)
# - JWT_SECRET_KEY (must be 32+ characters)
#
# OPTIONAL (warnings if missing):
# - GHL_AGENCY_API_KEY (needed for sub-accounts)
# - SENTRY_DSN (needed for error monitoring)
#
# SECURITY VALIDATIONS:
# - Webhook secret strength check
# - JWT secret strength check
# - API key format validation
# - Environment-specific requirements
#
# Run validation: python scripts/validate-jorge-config.py
# ==============================================================================