# ==============================================================================
# EnterpriseHub Real Estate AI Platform - Environment Configuration
# ==============================================================================
# Copy this file to .env and update with your actual values
# This template includes ALL required variables for deployment readiness

# ==============================================================================
# DEPLOYMENT ENVIRONMENT
# ==============================================================================
ENVIRONMENT=development
# Options: development, staging, production
# This affects security validation, CORS settings, and debug modes

# ==============================================================================
# FRONTEND INTEGRATION
# ==============================================================================
# Backend base URL for Next.js API routes and tooling
ENTERPRISE_API_BASE_URL=http://localhost:8000

# Public backend base URL for client-side API calls
NEXT_PUBLIC_ENTERPRISE_API_BASE_URL=http://localhost:8000

# ==============================================================================
# CORE AI PROVIDERS (Required)
# ==============================================================================

# Claude AI (Primary AI Provider)
# Get your key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# Google Gemini AI (Optional but recommended)
# Get your key from: https://aistudio.google.com/
GOOGLE_API_KEY=your-google-api-key-here
GEMINI_API_KEY=your-google-api-key-here

# Perplexity AI (Optional for market research)
# Get your key from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=your-perplexity-api-key-here

# OpenRouter (Optional - unified access to multiple LLM providers)
# Get your key from: https://openrouter.ai/keys
# OpenRouter provides access to Claude, GPT-4, Gemini, Llama, and 100+ other models
# Benefits: automatic fallbacks, cost optimization, easy A/B testing
OPENROUTER_API_KEY=your-openrouter-api-key-here

# OpenRouter Configuration
# Default model to use when provider is set to 'openrouter'
# Format: provider/model-name (e.g., anthropic/claude-3.5-sonnet, openai/gpt-4-turbo)
OPENROUTER_DEFAULT_MODEL=anthropic/claude-3.5-sonnet

# Optional: Set a custom app name for OpenRouter analytics
OPENROUTER_APP_NAME=EnterpriseHub-Real-Estate-AI

# Optional: Fallback models (comma-separated) if primary model fails
OPENROUTER_FALLBACK_MODELS=anthropic/claude-3-sonnet,openai/gpt-4-turbo

# Enable OpenRouter cost tracking in dashboards
OPENROUTER_ENABLE_COST_TRACKING=true

# Supermemory AI (Universal AI Memory)
# Get your key from: https://supermemory.ai
SUPERMEMORY_API_KEY=your-supermemory-api-key-here
SUPERMEMORY_API_URL=https://api.supermemory.ai/v1

# ==============================================================================
# GOHIGHLEVEL CRM INTEGRATION (Required)
# ==============================================================================

# GHL API Configuration
# Get from GHL → Settings → API
GHL_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-ghl-jwt-token
GHL_LOCATION_ID=your-location-id-here
LOCATION_ID=your-location-id-here

# Optional: Agency-level access
GHL_AGENCY_API_KEY=your-agency-api-key-here
GHL_AGENCY_ID=your-agency-id-here

# GHL Webhook Security
GHL_WEBHOOK_SECRET=your-webhook-secret-32-chars-minimum

# ==============================================================================
# DATABASE CONFIGURATION (Required for Production)
# ==============================================================================

# Primary Database (PostgreSQL recommended)
DATABASE_URL=postgresql://username:password@localhost:5432/enterprise_hub

# Redis for Caching and Sessions
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password-32-chars-minimum

# Database Pool Configuration
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ==============================================================================
# SECURITY CONFIGURATION (Critical for Production)
# ==============================================================================

# JWT Secret (MUST be 32+ characters in production)
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your-jwt-secret-key-32-characters-minimum

# Session Security
SESSION_SECRET_KEY=your-session-secret-key-32-characters-minimum

# Admin API Key (protects CRM config, bulk operations, bot management routes)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=your-admin-api-key-here

# ==============================================================================
# BILLING & SUBSCRIPTION (Required for SaaS)
# ==============================================================================

# Stripe Configuration
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret_here

# Stripe Product Price IDs (create in Stripe Dashboard)
STRIPE_PRICE_ID_STARTER=price_starter_monthly_id
STRIPE_PRICE_ID_PROFESSIONAL=price_professional_monthly_id
STRIPE_PRICE_ID_ENTERPRISE=price_enterprise_monthly_id

# ==============================================================================
# COMMUNICATION SERVICES (Optional but recommended)
# ==============================================================================

# Twilio for SMS
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+15551234567
TWILIO_WEBHOOK_SECRET=your_twilio_webhook_secret

# SendGrid for Email
SENDGRID_API_KEY=your_sendgrid_api_key_here
SENDGRID_SENDER_EMAIL=agent@yourdomain.com
SENDGRID_SENDER_NAME=AI Assistant

# ==============================================================================
# AI VOICE PROVIDERS (Optional)
# ==============================================================================

# Vapi.ai for Voice AI
VAPI_API_KEY=your_vapi_api_key_here
VAPI_ASSISTANT_ID=your_vapi_assistant_id
VAPI_PHONE_NUMBER_ID=your_vapi_phone_number_id
VAPI_WEBHOOK_SECRET=your_vapi_webhook_secret

# Retell AI (Alternative voice provider)
RETELL_API_KEY=your_retell_api_key_here
RETELL_AGENT_ID=your_retell_agent_id
RETELL_WEBHOOK_SECRET=your_retell_webhook_secret

# ==============================================================================
# OPTIMIZATION FEATURES (Phase 1-4 Optimizations)
# ==============================================================================

# Phase 1-2: Foundation Optimizations
ENABLE_CONVERSATION_OPTIMIZATION=true
ENABLE_ENHANCED_CACHING=true
ENABLE_ASYNC_OPTIMIZATION=true

# Phase 3-4: Advanced Optimizations (80-90% cost reduction)
ENABLE_TOKEN_BUDGET_ENFORCEMENT=true
ENABLE_DATABASE_CONNECTION_POOLING=true
ENABLE_SEMANTIC_RESPONSE_CACHING=true
ENABLE_MULTI_TENANT_OPTIMIZATION=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_COST_PREDICTION=true

# Optimization Configuration
TOKEN_BUDGET_DEFAULT_MONTHLY=100000
TOKEN_BUDGET_DEFAULT_DAILY=5000
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.85
SEMANTIC_CACHE_TTL=3600

# ==============================================================================
# JORGE BOT MODE FLAGS (Optional, see docs/FEATURE_FLAGS.md)
# ==============================================================================

# Jorge Seller Mode — routes "Needs Qualifying" contacts to seller qualification engine
JORGE_SELLER_MODE=false

# Jorge Buyer Mode — routes "Buyer-Lead" contacts to buyer qualification bot
JORGE_BUYER_MODE=false

# Tag that activates buyer mode routing (default: Buyer-Lead)
BUYER_LEAD_TAG=Buyer-Lead

# Jorge Lead Mode — routes contacts through lead qualification (default: true)
JORGE_LEAD_MODE=true

# Tag that activates lead mode routing (default: Needs Qualifying)
LEAD_ACTIVATION_TAG=Needs Qualifying

# ==============================================================================
# JORGE ADVANCED FEATURES (Optional)
# ==============================================================================

# Progressive Skills Manager (68% token reduction via two-phase qualification)
ENABLE_PROGRESSIVE_SKILLS=false
PROGRESSIVE_SKILLS_MODEL=claude-sonnet-4
PROGRESSIVE_SKILLS_PATH=skills/
PROGRESSIVE_SKILLS_CACHE_TTL=3600

# Agent Mesh Coordinator (enterprise parallel task orchestration)
ENABLE_AGENT_MESH=false
AGENT_MESH_MAX_AGENTS=10
AGENT_MESH_ROUTING_STRATEGY=capability_based
AGENT_MESH_MAX_COST=5.0
AGENT_MESH_TASK_TIMEOUT=30

# MCP Protocol Integration (standardized CRM/MLS access)
ENABLE_MCP_INTEGRATION=false
MCP_CONFIG_PATH=mcp_config.json
MCP_REQUEST_TIMEOUT=10
MCP_MAX_RETRIES=3

# Additional Jorge Bot Intelligence
ENABLE_ADAPTIVE_QUESTIONING=false
ENABLE_TRACK3_INTELLIGENCE=true
ENABLE_BOT_INTELLIGENCE=true

# ==============================================================================
# BUYER BUDGET CONFIGURATION (Optional)
# ==============================================================================
# Override buyer budget and qualification thresholds via environment variables.
# See ghl_real_estate_ai/ghl_utils/jorge_config.py::BuyerBudgetConfig for defaults.

# JSON-encoded budget ranges dict (optional)
# BUYER_BUDGET_RANGES={"under 500": {"budget_max": 700000, "buyer_type": "mid_market"}}

# Financing thresholds
BUYER_FINANCING_PRE_APPROVED_THRESHOLD=75
BUYER_FINANCING_NEEDS_APPROVAL_THRESHOLD=50
BUYER_FINANCING_CASH_BUDGET_THRESHOLD=70

# Urgency thresholds (score-based classification)
BUYER_URGENCY_IMMEDIATE_THRESHOLD=75
BUYER_URGENCY_3_MONTHS_THRESHOLD=50
BUYER_URGENCY_6_MONTHS_THRESHOLD=30

# Qualification thresholds (score-based classification)
BUYER_QUALIFICATION_HOT_THRESHOLD=75
BUYER_QUALIFICATION_WARM_THRESHOLD=50
BUYER_QUALIFICATION_LUKEWARM_THRESHOLD=30

# Routing thresholds
BUYER_ROUTING_QUALIFIED_THRESHOLD=50
BUYER_ROUTING_SCHEDULE_THRESHOLD=30

# ==============================================================================
# AUTHENTICATION CREDENTIALS
# ==============================================================================

# Auth user password hashes (bcrypt)
# Generate with: python -c "import bcrypt; print(bcrypt.hashpw(b'your_password', bcrypt.gensalt()).decode())"
AUTH_DEMO_USER_HASH=
AUTH_ADMIN_USER_HASH=

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Server Configuration
STREAMLIT_SERVER_PORT=8501
HOST=0.0.0.0
PORT=8501

# Logging & Debug
LOG_LEVEL=INFO
DEBUG_MODE=false
USE_DEMO_DATA=false

# WebSocket Configuration (Real-time features)
WEBSOCKET_HOST=localhost
WEBSOCKET_PORT=8765
WEBSOCKET_SECURE=false

# ==============================================================================
# GHL WORKFLOW IDS (Get from GHL Dashboard > Automation > Workflows)
# ==============================================================================
# These are REQUIRED for full automation. Without them, workflows won't trigger
# but the bots will still process and respond.

# Seller workflows
HOT_SELLER_WORKFLOW_ID=          # Triggers agent notification for hot sellers
WARM_SELLER_WORKFLOW_ID=         # Triggers nurture sequence for warm sellers

# Buyer workflows
HOT_BUYER_WORKFLOW_ID=           # Triggers showing coordination for hot buyers
WARM_BUYER_WORKFLOW_ID=          # Triggers buyer nurture sequence

# General
NOTIFY_AGENT_WORKFLOW_ID=        # Sends SMS/email to agent for qualified leads

# ==============================================================================
# GHL CUSTOM FIELD IDS (Get from GHL Dashboard > Settings > Custom Fields)
# ==============================================================================
# Format: UUID-style strings from GHL. If not set, semantic field names are used
# as fallback (may not map to actual GHL fields).

# Lead scoring fields
CUSTOM_FIELD_LEAD_SCORE=
CUSTOM_FIELD_BUDGET=
CUSTOM_FIELD_LOCATION=
CUSTOM_FIELD_TIMELINE=

# Seller qualification fields
CUSTOM_FIELD_SELLER_TEMPERATURE=
CUSTOM_FIELD_SELLER_MOTIVATION=
CUSTOM_FIELD_TIMELINE_URGENCY=
CUSTOM_FIELD_PROPERTY_CONDITION=
CUSTOM_FIELD_PRICE_EXPECTATION=

# Buyer qualification fields
CUSTOM_FIELD_BUYER_TEMPERATURE=
CUSTOM_FIELD_PRE_APPROVAL_STATUS=
CUSTOM_FIELD_PROPERTY_PREFERENCES=

# Analytics fields
CUSTOM_FIELD_EXPECTED_ROI=
CUSTOM_FIELD_LEAD_VALUE_TIER=
CUSTOM_FIELD_AI_VALUATION_PRICE=
CUSTOM_FIELD_DETECTED_PERSONA=

# ==============================================================================
# BUSINESS CONFIGURATION (Customize for your business)
# ==============================================================================

# Business Hours (24-hour format)
BUSINESS_HOURS_MONDAY_START=09:00
BUSINESS_HOURS_MONDAY_END=18:00
BUSINESS_HOURS_TUESDAY_START=09:00
BUSINESS_HOURS_TUESDAY_END=18:00
BUSINESS_HOURS_WEDNESDAY_START=09:00
BUSINESS_HOURS_WEDNESDAY_END=18:00
BUSINESS_HOURS_THURSDAY_START=09:00
BUSINESS_HOURS_THURSDAY_END=18:00
BUSINESS_HOURS_FRIDAY_START=09:00
BUSINESS_HOURS_FRIDAY_END=18:00
BUSINESS_HOURS_SATURDAY_START=10:00
BUSINESS_HOURS_SATURDAY_END=16:00
BUSINESS_HOURS_SUNDAY_START=closed
BUSINESS_HOURS_SUNDAY_END=closed

# Lead Scoring Thresholds
HOT_LEAD_THRESHOLD=3
WARM_LEAD_THRESHOLD=2
COLD_LEAD_THRESHOLD=1
AUTO_DEACTIVATE_THRESHOLD=70

# Default Agent Information
DEFAULT_AGENT_NAME=Your Name Here
DEFAULT_AGENT_PHONE=+15551234567
DEFAULT_AGENT_EMAIL=agent@yourdomain.com

# ==============================================================================
# MLS / PROPERTY DATA INTEGRATION (Optional)
# ==============================================================================

# Attom Data API (property valuations, listing history, comparable sales)
ATTOM_API_KEY=                   # Get from https://api.developer.attomdata.com/
MLS_RETS_URL=                    # MLS RETS feed URL (if available via board membership)
MLS_RETS_USERNAME=
MLS_RETS_PASSWORD=
ENABLE_MLS_INTEGRATION=false     # Enable real MLS/Attom data lookups

# ==============================================================================
# MONITORING & ANALYTICS (Production recommended)
# ==============================================================================

# Prometheus Monitoring
PROMETHEUS_URL=http://prometheus-server:9090
PROMETHEUS_TOKEN=your_prometheus_token

# Alert Configuration
SLACK_WEBHOOK_URL=your_slack_webhook_url
PAGERDUTY_API_KEY=your_pagerduty_api_key

# Performance Monitoring
ENABLE_PUSHGATEWAY=false
PUSHGATEWAY_URL=http://prometheus-pushgateway:9091

# ==============================================================================
# GOOGLE CLOUD (Optional for enhanced features)
# ==============================================================================

GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_PROJECT_ID=your-project-id

# ==============================================================================
# GHL OAUTH (Required for OAuth-based GHL integrations)
# ==============================================================================

# GHL_CLIENT_ID=your-ghl-client-id
# GHL_CLIENT_SECRET=your-ghl-client-secret
# GHL_REFRESH_TOKEN=your-ghl-refresh-token

# ==============================================================================
# ADDITIONAL AI PROVIDERS (Optional)
# ==============================================================================

# OpenAI (optional, used via OpenRouter or direct)
# OPENAI_API_KEY=sk-your-openai-key-here

# ElevenLabs (text-to-speech for voice features)
# ELEVENLABS_API_KEY=your-elevenlabs-api-key

# HeyGen (AI avatar video generation)
# HEYGEN_API_KEY=your-heygen-api-key
# HEYGEN_AVATAR_ID=your-heygen-avatar-id

# ==============================================================================
# VECTOR SEARCH (Optional - for RAG pipeline)
# ==============================================================================

# Weaviate (alternative vector store)
# WEAVIATE_URL=http://localhost:8080
# WEAVIATE_API_KEY=your-weaviate-api-key

# ==============================================================================
# REALTIME FEATURES (Optional tuning)
# ==============================================================================

# Enable/disable real-time event processing
REALTIME_ENABLED=true
# REALTIME_POLL_INTERVAL=5
# REALTIME_USE_WEBSOCKET=true

# ==============================================================================
# SMS COMPLIANCE (Advanced tuning)
# ==============================================================================

# Allow DDL operations for SMS compliance tables (set true on first run)
# SMS_COMPLIANCE_ALLOW_DDL=false
# SMS_COMPLIANCE_USE_CACHE=true

# ==============================================================================
# DEVELOPMENT FLAGS (Development only)
# ==============================================================================

# Only set these in development
DEVELOPMENT_MODE=true
TEST_MODE=false
# USE_MOCK_LLM=false

# Testing Database (separate from production)
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/enterprise_hub_test
TEST_REDIS_URL=redis://localhost:6379/1
